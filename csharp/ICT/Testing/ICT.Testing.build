<?xml version="1.0"?>
<project name="ICT-Testing-Build">

<include buildfile="../../../inc/nant/OpenPetra.csharp.xml"/> 

<target name="test-client">
    <nant inheritall="false" target="startPetraServer" buildfile="${path::combine(dir.root, 'OpenPetra.build')}" verbose="${verbose}"/>    
    <nunit2>
        <formatter type="Plain" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.Common.Controls.dll" />
<!-- TODO
        <test assemblyname="${dir.bin}/Ict.Testing.lib.Reporting.dll" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.MFinance.GiftForm.dll" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.MFinance.GLForm.dll" />
-->
    </nunit2>
    <nant inheritall="false" target="stopPetraServer" buildfile="${path::combine(dir.root, 'OpenPetra.build')}" verbose="${verbose}"/>    
</target>

<target name="test-tools">
    <nunit2>
        <formatter type="Plain" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.CodeGeneration.dll" />
    </nunit2>
</target>

<target name="test-server">
    <nunit2>
        <formatter type="Plain" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.MPartner.server.PartnerEdit.dll" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.MFinance.GL.dll" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.MFinance.ICH.dll" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.MFinance.AP.dll" />

        <!-- TODO https://sourceforge.net/apps/mantisbt/openpetraorg/view.php?id=578 
        <test assemblyname="${dir.bin}/Ict.Testing.lib.MPartner.server.PartnerExports.dll" />
        -->
        
        <!-- 
        <test assemblyname="${dir.bin}/Ict.Testing.lib.MFinance.server.Gift.dll" />
        -->
    </nunit2>
</target>

<target name="test-common">
    <nunit2>
        <formatter type="Plain" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.Common.dll" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.Common.IO.dll" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.Common.DB.dll" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.Common.Data.dll" />
        <test assemblyname="${dir.bin}/Ict.Testing.lib.Shared.dll" />
        
    </nunit2>
    <nunit2>
        <formatter type="Plain" />
        <test>
            <assemblies>
<!--
                <include name="${dir.bin}/Ict.Testing.lib.Common*dll" />
                <exclude name="${dir.bin}/Ict.Testing.lib.Common.Controls.dll" />
-->
            </assemblies>
        </test>
    </nunit2>
</target>

<target name="test-without-display">
    <call target="test-common"/>
    <call target="test-tools"/>
    <call target="test-server"/>
</target>

<target name="test-all">
    <call target="test-without-display"/>
    <call target="test-client"/>
</target>

</project>