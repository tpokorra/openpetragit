RootNode:
    BaseYaml: ../../../CommonForms/PetraForm.yaml
    FormTitle: AP Payment
    Namespace: Ict.Petra.Client.MFinance.Gui.AP
    MasterTable: AApSupplier
    DetailTable: AApDocumentPayment
    DatasetType: Ict.Petra.Shared.MFinance.AP.Data.AccountsPayableTDS
    FormType: browse
    Template: window
    WindowWidth: 750
    WindowHeight: 600
    Actions:
        actMakePayment: {Label=&Make Payment, ActionClick=MakePayment}
        actPrintReport: {Label=Reprint report, ActionClick=PrintPaymentReport}
        actPayPartial:
            ActionClick: EnablePartialPayment
    Controls:
        pnlContent:
            Dock: Fill
            Controls: 
                Row0: [grpPaymentList, pnlSupplierDetails]
                Row1: [grpDetails]
        grpPaymentList:
            Label: Suppliers to Pay
            Controls: [grdPayments]
            Dock: Left
            Width: 200
            Height: 250
        grdPayments:
            Dock: Fill
            ActionFocusRow: FocusedRowChanged
        pnlSupplierDetails:
            Controls: 
                Row0: [txtCurrency, cmbPaymentType]
                Row1: [txtTotalAmount, txtExchangeRate]
                Row2: [cmbBankAccount]
                Row3: [txtReference]
                Row4: [chkPrintRemittance, chkPrintLabel]
                Row5: [chkPrintCheque, txtChequeNumber]
            Padding: 5,0,10,0
            # todo: electronic payment; 
            # todo: pay by transfer (select another supplier; payment will create another invoice with the other supplier, at a given exchange rate, with the given invoice number)
            Dock:Top
        chkPrintRemittance:
            CheckBoxAttachedLabel: right
        chkPrintLabel:
            CheckBoxAttachedLabel: right
        chkPrintCheque:
            CheckBoxAttachedLabel: right
        txtChequeNumber:
        grpDetails:
            Controls: [grdDetails, pnlDetails]
            Label: Invoices in this payment
            Dock: Fill
        grdDetails:
            Dock: Fill
            DetailTable: true
            ActionFocusRow: FocusedRowChangedDetails
        pnlDetails:
            Controls: [rgrAmountToPay, chkClaimDiscount, txtAmountToPay]
            Dock: Bottom
        rgrAmountToPay:
            OptionalValues: [PayFullOutstandingAmount, PayAPartialAmount]
            Action: actPayPartial
        chkClaimDiscount:
            # TODO: allow discounts
            CheckBoxAttachedLabel: right
            ReadOnly: true
        txtAmountToPay:
        txtCurrency: {Label=Currency, ReadOnly=true, DataField=AApSupplier.CurrencyCode}
        cmbPaymentType:
            OptionalValues: [=Cash, Cheque]
            # TODO: Transfer, Electronic
            Label: Payment T&ype
            Width: 130
        txtReference: {Label=&Reference, ColSpan=2, DataField=AApPayment.Reference}
        cmbBankAccount: {List=UserDefinedList, ColSpan=2}
        txtExchangeRate:
        txtTotalAmount:
            Label: &Amount
            ReadOnly: true
    Toolbar:
        tbbMakePayment:
        tbbPrintReport:
