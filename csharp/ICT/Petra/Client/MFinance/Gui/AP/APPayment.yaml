RootNode:
    BaseYaml: ../../../CommonForms/PetraForm.yaml
    FormTitle: AP Payment
    Namespace: Ict.Petra.Client.MFinance.Gui.AP
    MasterTable: AApSupplier
    DetailTable: AApDocumentPayment
    DatasetType: Ict.Petra.Shared.MFinance.AP.Data.AccountsPayableTDS
    FormType: browse
    Template: window
    WindowWidth: 750
    WindowHeight: 600
    Actions:
        actMakePayment: {Label=&Make Payment, ActionClick=MakePayment}
    Controls:
        pnlContent:
            Controls: [grpPaymentList, pnlSupplierDetails, grpDetails]
            Dock: Fill
        grpPaymentList:
            RowSpan: 2
            Label: Suppliers to Pay
            Controls: [grdPayments]
            Dock: Left
            Width: 200
        grdPayments:
            Dock: Fill
            ActionFocusRow: FocusedRowChanged
        pnlSupplierDetails:
            Controls: 
                Row0: [txtCurrency, cmbPaymentType]
                Row1: [txtTotalAmount, txtExchangeRate]
                Row2: [cmbBankAccount]
                Row3: [txtReference]
                Row4: [chkPrintRemittance, chkPrintLabel]
                Row5: [chkPrintCheque, txtChequeNumber]
            Padding: 5,0,10,0
            # todo: electronic payment; 
            # todo: pay by transfer (select another supplier; payment will create another invoice with the other supplier, at a given exchange rate, with the given invoice number)
            Dock:Top
        chkPrintRemittance:
            CheckBoxAttachedLabel: right
        chkPrintLabel:
            CheckBoxAttachedLabel: right
        chkPrintCheque:
            CheckBoxAttachedLabel: right
        txtChequeNumber:
        grpDetails:
            Controls: [grdDetails, pnlDetails]
            Label: Invoices in this payment
            Dock: Fill
        grdDetails:
            Dock: Fill
            DetailTable: true
            #Columns: [AApDocumentPayment.Amount, AApDocumentDetail.Narrative, AApDocumentDetail.ItemRef]
            ActionFocusRow: FocusedRowChangedDetails
        pnlDetails:
            Controls: [rgrAmountToPay, chkClaimDiscount, txtAmountToPay]
            Dock: Bottom
        rgrAmountToPay:
            OptionalValues: [PayFullOutstandingAmount, PayAPartialAmount]
        chkClaimDiscount:
            # TODO: allow discounts
            CheckBoxAttachedLabel: right
            ReadOnly: true
        txtAmountToPay:
            # TODO: allow partial payments
            ReadOnly: true
        txtCurrency: {Label=Currency, ReadOnly=true, DataField=AApSupplier.CurrencyCode}
        cmbPaymentType:
            OptionalValues: [=Cash, Cheque]
            # TODO: Transfer, Electronic
            Label: Payment T&ype
            Width: 130
        txtReference: {Label=&Reference, ColSpan=2, DataField=AApPayment.Reference}
        cmbBankAccount: {List=UserDefinedList, ColSpan=2}
        txtExchangeRate:
        txtTotalAmount:
            Label: &Amount
            ReadOnly: true
    Toolbar:
        tbbMakePayment:
        tbbSplitByInvoice: